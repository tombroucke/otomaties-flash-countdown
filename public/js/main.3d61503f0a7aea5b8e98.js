(()=>{"use strict";class t{constructor(t){this.el=t,this.bindEvents(),this.type="static",this.maybeConvert(),this.init()}init(){this.el.classList.add("initialized")}bindEvents(){window.addEventListener("resize",this.maybeConvert.bind(this)),window.addEventListener("countdownInitialized",this.maybeConvert.bind(this))}maybeConvert(){let t=!1;const e=this.el,i=document.querySelector(".flash-message__content"),n=this.isOverflown(i);n&&"static"==this.type?t=this.convertTo("dynamic"):n||"dynamic"!=this.type||(t=this.convertTo("static")),t&&(e.parentNode.insertBefore(t,e.nextSibling),e.remove(),this.el=t)}convertTo(t){this.type=t;const e="dynamic"==t?"marquee":"div";return this.createBanner(e,this.el)}createBanner(t,e){const i=e.getAttribute("class").split(" ");let n=document.createElement(t);for(let t=0;t<i.length;t++){const e=i[t];n.classList.add(e)}return n.setAttribute("style",e.getAttribute("style")),n.innerHTML=e.innerHTML,n}isOverflown(t){return t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth}}class e{constructor(t,e){this.el=t,this.banner=e,this.initialized=!1,this.timer=!1,this._second=1e3,this._minute=60*this._second,this._hour=60*this._minute,this.countDownTo=new Date(this.el.getAttribute("data-countdown-to")),this._day=24*this._hour,this.initCountdown()}initCountdown(){this.timer=setInterval(this.showRemaining.bind(this),1e3)}showRemaining(){var t=new Date,e=this.countDownTo-t;if(e<=0)return clearInterval(this.timer),void this.banner.remove();var i=Math.floor(e/this._day),n=Math.floor(e%this._day/this._hour),s=Math.floor(e%this._hour/this._minute),o=Math.floor(e%this._minute/this._second);if(this.el.innerHTML="",i>0&&(this.el.innerHTML+=i+" "+this.pluralize(flash_countdown_vars.strings.day,flash_countdown_vars.strings.days,i)+" "),this.el.innerHTML+=n+":"+this.pad(s,2)+":"+this.pad(o,2),!this.initialized){const t=new CustomEvent("countdownInitialized");window.dispatchEvent(t),this.initialized=!0}}pad(t,e){for(t=t.toString();t.length<e;)t="0"+t;return t}pluralize(t,e,i){return 1==i?t:e}}document.addEventListener("DOMContentLoaded",(()=>{const i=document.querySelector(".flash-message");i&&new t(i);const n=document.querySelector(".flash-message__countdown");n&&i&&new e(n,i)}))})();